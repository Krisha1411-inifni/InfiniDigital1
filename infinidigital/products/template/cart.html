<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cart | InfiniDigital</title>

    <!-- Bootstrap (if not already included globally) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

{% include 'header.html' %}
<div style="margin-top: 100px;"></div>

{% include "partials/checkout_progress.html" with step=1 %}


<header class="site-header d-flex flex-column justify-content-center align-items-center">
                <div class="container">
                    <div class="row justify-content-center align-items-center">

                        <div class="col-lg-5 col-12 mb-5">
                            <nav aria-label="breadcrumb">
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="/">Homepage</a></li>

                                    <li class="breadcrumb-item active" aria-current="page">shopping cart</li>
                                </ol>
                            </nav>

                            <h2 class="text-white">Shopping <br> Cart</h2>

                        </div>

                        <div class="col-lg-5 col-12">
                            <div class="topics-detail-block bg-white shadow-lg">
                                <img src="{% static 'images/topics/undraw_Remote_design_team_re_urdx.png' %}" class="topics-detail-block-image img-fluid">
                            </div>
                        </div>

                    </div>
                </div>
            </header>

<section class="cart-page py-5">
    <div class="container">

        <div class="shopping-cart shadow border border-secondary rounded overflow-hidden">
            {% if cart_items %}
            <!-- Cart Header -->
            <div class="row fw-bold border-bottom py-3 text-center bg-dark text-white rounded border border-secondary p-4">
                <div class="col-md-2">Product Image</div>
                <div class="col-md-4">Product</div>
                <div class="col-md-2">Price</div>
                <div class="col-md-2">Total</div>
                <div class="col-md-2">Remove</div>
            </div>

            {% for item in cart_items %}
            <!-- Product Row -->
            <div class="row align-items-center py-4 text-center bg-dark border-bottom border-secondary p-4">
                <div class="col-md-2 d-flex align-items-center justify-content-center">
                        {% if item.product.ProductImage1 %}
  <img class="img-thumbnail w-25 h-50"
       src="{{ item.product.ProductImage1.url }}"
       alt="{{ item.product.ProductName }}">
{% else %}
  <img class="img-thumbnail w-25 h-50"
       src="{% static 'images/no-image.png' %}"
       alt="No image">
{% endif %}

                </div>

                <div class="col-md-4 d-flex align-items-center justify-content-center">
                    <h6 class="ms-3 mb-0 text-white">{{ item.product.ProductName }}</h6>
                </div>

                <div class="col-md-2 text-white">
                    â‚¹<span>{{ item.product.ProductDiscountPrice }}</span>
                </div>

                <div class="col-md-2 text-white">
                    â‚¹<span>{{ item.product.ProductDiscountPrice }}</span>
                </div>

                <div class="col-md-2">
                    <button class="btn btn-danger btn-sm">X</button>
                </div>

            </div>
            {% endfor %}
        </div>
                <!-- Cart Total -->
        <div class="text-end mt-4">
            <h5 class="text-white">Cart Total: â‚¹<span id="finalTotal">{{ cart_total }}</span></h5>
            <a href="{% url 'checkout' %}" class="btn btn-success mt-3 px-4">
    Proceed to Checkout
</a>
        </div>
        {% else %}
         <div class="alert alert-info text-center">
    Your cart is empty ðŸ›’<br>
    <a href="/" class="btn btn-primary mt-3">Browse Products</a>
  </div>
        {% endif %}
    </div>
</section>

{% include 'footer.html' %}

<!-- JS Logic -->
<script>
    {% for item in cart_items %}
    let price = {{ item.product.ProductDiscountPrice }};
    let quantity = 1;
    {% endfor %}
    function updateCart() {
        document.getElementById("quantity").innerText = quantity;
        document.getElementById("total").innerText = price * quantity;
        document.getElementById("finalTotal").innerText = price * quantity;
    }

    function increaseQty() {
        quantity++;
        updateCart();
    }

    function decreaseQty() {
        if (quantity > 1) {
            quantity--;
            updateCart();
        }
    }
</script>

</body>
</html>
